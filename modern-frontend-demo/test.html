<!DOCTYPE html>
<html>
<head>
    <title>COT-DIR æœåŠ¡çŠ¶æ€æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .status { padding: 20px; margin: 10px 0; border-radius: 8px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>ğŸ§  COT-DIR ç°ä»£åŒ–å‰ç«¯æµ‹è¯•é¡µé¢</h1>
    
    <div class="info">
        <h3>ğŸ“± å½“å‰è®¿é—®åœ°å€ï¼š</h3>
        <p><strong>æµ‹è¯•é¡µé¢</strong>: <span id="current-url"></span></p>
        <p><strong>Reactå‰ç«¯</strong>: <a href="http://localhost:3000" target="_blank">http://localhost:3000</a></p>
        <p><strong>Flask API</strong>: <a href="http://localhost:8083/api/stats" target="_blank">http://localhost:8083/api/stats</a></p>
    </div>

    <div id="react-status" class="status">
        <h3>ğŸš€ Reactå‰ç«¯çŠ¶æ€</h3>
        <p id="react-result">æ£€æµ‹ä¸­...</p>
        <button onclick="testReact()">æµ‹è¯•Reactå‰ç«¯</button>
    </div>

    <div id="api-status" class="status">
        <h3>âš™ï¸ Flask APIçŠ¶æ€</h3>
        <p id="api-result">æ£€æµ‹ä¸­...</p>
        <button onclick="testAPI()">æµ‹è¯•Flask API</button>
    </div>

    <div id="all-modules" class="status">
        <h3>ğŸ“š å¯ç”¨æ¨¡å—åˆ—è¡¨</h3>
        <ul>
            <li>ğŸ§® <strong>è§£é¢˜å™¨</strong> - æ™ºèƒ½æ•°å­¦é—®é¢˜æ±‚è§£</li>
            <li>ğŸ—ºï¸ <strong>çŸ¥è¯†å›¾è°±</strong> - çŸ¥è¯†ç»“æ„å¯è§†åŒ–</li>
            <li>ğŸ“š <strong>å­¦ä¹ æŒ‡å¯¼</strong> - ç³»ç»Ÿå­¦ä¹ è·¯å¾„</li>
            <li>ğŸ” <strong>é”™é¢˜åˆ†æ</strong> - æ™ºèƒ½é”™è¯¯è¯Šæ–­</li>
            <li>ğŸ¯ <strong>ç­–ç•¥åˆ†æ</strong> - æ¨ç†ç­–ç•¥è¯¦è§£</li>
            <li>ğŸ“Š <strong>å…³ç³»å›¾è°±</strong> - å®ä½“å…³ç³»å¯è§†åŒ–</li>
        </ul>
        <p><strong>è®¿é—®æ–¹å¼</strong>ï¼šç‚¹å‡» <a href="http://localhost:3000" target="_blank" style="color: #007bff; font-weight: bold;">http://localhost:3000</a> ç„¶åç‚¹å‡»é¡¶éƒ¨æ ‡ç­¾é¡µåˆ‡æ¢ä¸åŒæ¨¡å—</p>
    </div>

    <script>
        // æ˜¾ç¤ºå½“å‰URL
        document.getElementById('current-url').textContent = window.location.href;

        // æµ‹è¯•Reactå‰ç«¯
        async function testReact() {
            const statusDiv = document.getElementById('react-status');
            const resultP = document.getElementById('react-result');
            
            try {
                const response = await fetch('http://localhost:3000');
                if (response.ok) {
                    const text = await response.text();
                    if (text.includes('COT-DIR')) {
                        statusDiv.className = 'status success';
                        resultP.textContent = 'âœ… Reactå‰ç«¯æ­£å¸¸è¿è¡Œï¼é¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®ã€‚';
                    } else {
                        statusDiv.className = 'status error';
                        resultP.textContent = 'âŒ Reactå‰ç«¯å“åº”å¼‚å¸¸ï¼Œå†…å®¹ä¸æ­£ç¡®ã€‚';
                    }
                } else {
                    statusDiv.className = 'status error';
                    resultP.textContent = 'âŒ Reactå‰ç«¯æ— æ³•è®¿é—®ï¼ŒHTTPçŠ¶æ€: ' + response.status;
                }
            } catch (error) {
                statusDiv.className = 'status error';
                resultP.textContent = 'âŒ è¿æ¥Reactå‰ç«¯å¤±è´¥: ' + error.message;
            }
        }

        // æµ‹è¯•Flask API
        async function testAPI() {
            const statusDiv = document.getElementById('api-status');
            const resultP = document.getElementById('api-result');
            
            try {
                const response = await fetch('http://localhost:8083/api/stats');
                if (response.ok) {
                    const data = await response.json();
                    if (data.project_name) {
                        statusDiv.className = 'status success';
                        resultP.textContent = 'âœ… Flask APIæ­£å¸¸è¿è¡Œï¼é¡¹ç›®: ' + data.project_name;
                    } else {
                        statusDiv.className = 'status error';
                        resultP.textContent = 'âŒ Flask APIå“åº”æ ¼å¼å¼‚å¸¸ã€‚';
                    }
                } else {
                    statusDiv.className = 'status error';
                    resultP.textContent = 'âŒ Flask APIæ— æ³•è®¿é—®ï¼ŒHTTPçŠ¶æ€: ' + response.status;
                }
            } catch (error) {
                statusDiv.className = 'status error';
                resultP.textContent = 'âŒ è¿æ¥Flask APIå¤±è´¥: ' + error.message;
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.onload = function() {
            setTimeout(testReact, 500);
            setTimeout(testAPI, 1000);
        };
    </script>
</body>
</html>