# 分步物性推理功能使用指南

## 🎯 功能概述

新的分步物性推理功能按照用户要求实现了以下特性：
- **5个步骤分步展示**：每个算法步骤都有独立的可视化图形
- **交互式导航**：可以前进/后退查看各个步骤
- **清晰的图形展示**：每个步骤都有专门的关系图，而不是只显示最终结果

## 🚀 快速开始

### 1. 启动后端API服务器
```bash
cd modern-frontend-demo
python demo_frontend.py
```

### 2. 启动前端开发服务器
```bash
cd modern-frontend-demo
npm run dev
```

### 3. 访问应用
打开浏览器访问：http://localhost:5173

### 4. 使用分步推理功能
1. 点击顶部导航栏的 **"🧩 物性推理"** 标签页
2. 选择一个示例问题（苹果数量、水池排水、购物问题）
3. 点击 **"开始分步推理"** 按钮
4. 使用导航按钮或步骤圆圈查看各个步骤

## 📊 五个推理步骤说明

### 步骤 1：分解题目 → 提取entity
- 识别题目中的人物、物体和数量
- 图中高亮显示提取出的实体

### 步骤 2：加入物性关系 → 构建graph
- 添加运算概念（如加法、乘法）
- 建立转换关系，连接已知量和运算

### 步骤 3：物性关系推理 → 扩展连接
- 通过守恒定律（质量、数量、价值守恒）
- 因果关系（原因导致结果）
- 时间关系（随时间变化的规律）

### 步骤 4：寻找通路 → 确定求解路径
- 标识已知量（绿色）和未知量（红色）
- 在图中寻找从已知到未知的路径

### 步骤 5：沿路径推理 → 得出答案
- 只显示求解路径上的节点和关系
- 忽略无关的节点，专注于核心推理

## 🎨 视觉设计

- **绿色节点**：已知量
- **红色节点**：未知量
- **蓝色节点**：概念/运算
- **紫色节点**：其他实体
- **高亮效果**：当前步骤重点关注的元素
- **虚线**：物理规律关系（守恒、因果、时间）

## 🔧 故障排查

如果功能无法正常工作，请检查：

1. **API服务器是否运行**
   - 检查终端是否显示 "Flask server is running on http://localhost:5000"
   - 访问 http://localhost:5000/api/test 确认API可用

2. **前端是否正确编译**
   - 检查是否有编译错误
   - 清除缓存：`rm -rf node_modules/.vite`

3. **测试功能**
   - 在浏览器中打开 `test_step_by_step_reasoning.html` 进行功能测试

## 📝 技术实现细节

- **组件位置**：`src/components/features/StepByStepPhysicalReasoning.tsx`
- **API支持**：`src/services/physicalReasoningAPI.ts`
- **集成位置**：在 `App.tsx` 的 'reasoning' 标签页中使用

## 🎯 核心算法思想

基于物性关系的推理通过引入物理世界的基本规律（守恒、因果、时空连续性等），在看似断开的已知和未知之间建立桥梁。这种方法不仅模拟了人类的直觉推理，还提供了可解释的推理路径。

---

**注意**：这是根据用户明确要求实现的分步展示功能，每个步骤都有独立的图形可视化，而不是只显示最终结果。